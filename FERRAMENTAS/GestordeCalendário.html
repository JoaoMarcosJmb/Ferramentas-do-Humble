<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Calendário Visual - Humble League</title>
    <style>
        :root {
            --bg-color: #fceeb5; /* Cor de areia do fundo */
            --text-color: #5d4037;
            --cell-size: 140px; /* Tamanho do dia */
            --grid-gap: 10px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            font-size: 2.5rem;
            text-transform: uppercase;
            margin-bottom: 20px;
            color: #3e2723;
        }

        /* --- Controles --- */
        .controls {
            background: rgba(255, 255, 255, 0.4);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        input, button {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }

        button {
            background-color: #ff7043;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s;
        }

        button:hover {
            transform: scale(1.05);
            background-color: #f4511e;
        }

        /* --- O Calendário --- */
        .calendar-wrapper {
            position: relative;
            padding: 20px;
            /* Container para limitar a grade visual */
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, var(--cell-size));
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #bf360c;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, var(--cell-size));
            grid-auto-rows: var(--cell-size);
            position: relative; /* Necessário para posicionar as pedras absolutas */
        }

        /* Célula do dia */
        .day-cell {
            position: relative;
            padding: 10px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .day-number {
            font-weight: 900;
            font-size: 1.5rem;
            color: #795548;
            align-self: flex-start;
        }

        .day-cell.empty {
            background: transparent;
        }

        /* --- O Visual da Grade (Pedras) --- */
        /* Essa classe será aplicada às imagens geradas via JS */
        .grid-asset {
            position: absolute;
            width: 24px; /* Ajuste conforme o tamanho do seu PNG */
            height: 24px;
            pointer-events: none; /* Não atrapalha o clique nos eventos */
            z-index: 10;
            /* O JS vai injetar o transform: rotate(...) */
        }

        /* --- Eventos --- */
        .event-card {
            background-color: rgba(255, 255, 255, 0.6);
            border-left: 4px solid #ff7043;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .event-card:hover {
            background-color: #fff;
        }

        .event-time {
            font-size: 0.75rem;
            color: #666;
            font-weight: bold;
        }
        
        .event-title {
            font-weight: 600;
            color: #333;
        }

    </style>
</head>
<body>

    <h1>Gestor Humble League</h1>

    <div class="controls">
        <input type="text" id="eventTitle" placeholder="Nome do Evento (ex: Qualify OU)">
        <input type="date" id="eventDate">
        <input type="time" id="eventTime">
        <button onclick="addEvent()">Adicionar Evento</button>
        <button onclick="resetCalendar()">Limpar Tudo</button>
    </div>

    <div class="calendar-wrapper">
        <div class="weekdays">
            <div>Domingo</div><div>Segunda</div><div>Terça</div><div>Quarta</div><div>Quinta</div><div>Sexta</div><div>Sábado</div>
        </div>
        
        <div class="calendar-grid" id="calendarGrid">
            </div>
    </div>

    <script>
        // --- CONFIGURAÇÃO VISUAL ---
        const CONFIG = {
            // Caminho da imagem. Se trocar para 'IMAGENS/madeira.png', o sistema todo muda.
            // Estou usando um placeholder online para você ver funcionando agora.
            // TROQUE POR: 'IMAGENS/pedra.png'
            gridImage: 'https://cdn-icons-png.flaticon.com/512/7509/7509680.png', 
            
            gridDensity: 'corners', // 'corners' (só cantos) ou 'full' (linha completa)
            rotationRange: 20 // Graus (+ ou -)
        };

        // --- ESTADO DA APLICAÇÃO ---
        let currentDate = new Date();
        // Exemplo inicial de dados
        let events = [
            { id: 1, title: 'Qualify UU', date: '2026-01-04', time: '18:00' },
            { id: 2, title: 'Semanal RU', date: '2026-01-06', time: '19:00' },
            { id: 3, title: 'Final League', date: '2026-01-10', time: '18:00' }
        ];

        const gridContainer = document.getElementById('calendarGrid');

        // --- FUNÇÃO PRINCIPAL: RENDERIZAR CALENDÁRIO ---
        function renderCalendar() {
            gridContainer.innerHTML = ''; // Limpa tudo
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            const firstDayIndex = new Date(year, month, 1).getDay();
            const lastDay = new Date(year, month + 1, 0).getDate();

            // 1. Renderizar células vazias (dias do mês anterior)
            for (let i = 0; i < firstDayIndex; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('day-cell', 'empty');
                gridContainer.appendChild(emptyCell);
            }

            // 2. Renderizar dias do mês
            for (let day = 1; day <= lastDay; day++) {
                const cell = document.createElement('div');
                cell.classList.add('day-cell');
                
                // Número do dia
                const dayNumber = document.createElement('div');
                dayNumber.classList.add('day-number');
                dayNumber.innerText = day;
                cell.appendChild(dayNumber);

                // Filtrar e adicionar eventos desse dia
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const daysEvents = events.filter(e => e.date === dateString);
                
                daysEvents.sort((a, b) => a.time.localeCompare(b.time)); // Ordenar por horário

                daysEvents.forEach(evt => {
                    const evtDiv = document.createElement('div');
                    evtDiv.classList.add('event-card');
                    evtDiv.innerHTML = `
                        <div class="event-time">${evt.time}</div>
                        <div class="event-title">${evt.title}</div>
                    `;
                    cell.appendChild(evtDiv);
                });

                gridContainer.appendChild(cell);
            }

            // 3. Renderizar a Grade Orgânica (As pedras)
            renderOrganicGrid(firstDayIndex + lastDay);
        }

        // --- A LÓGICA DA GRADE ORGÂNICA ---
        function renderOrganicGrid(totalCells) {
            // A grade tem 7 colunas. Calculamos quantas linhas temos.
            const columns = 7;
            const rows = Math.ceil(totalCells / columns);
            const cellSize = 140; // Mesmo valor do CSS

            // Função auxiliar para criar uma pedra
            function createStone(top, left) {
                const img = document.createElement('img');
                img.src = CONFIG.gridImage;
                img.classList.add('grid-asset');
                
                // Rotação Aleatória
                const randomRot = (Math.random() * CONFIG.rotationRange * 2) - CONFIG.rotationRange;
                // Leve variação de tamanho para ficar mais orgânico
                const randomScale = 0.8 + (Math.random() * 0.4); 

                img.style.top = `${top - 12}px`;  // -12 para centralizar (metade do tamanho da img)
                img.style.left = `${left - 12}px`;
                img.style.transform = `rotate(${randomRot}deg) scale(${randomScale})`;

                return img;
            }

            // Desenhar pedras nas intersecções (Cantos)
            // Loop pelas linhas e colunas para colocar as pedras nos cantos das células
            for (let r = 0; r <= rows; r++) {
                for (let c = 0; c <= columns; c++) {
                    // Posição baseada na linha/coluna
                    const topPos = r * cellSize;
                    const leftPos = c * cellSize;

                    // Adiciona a pedra
                    const stone = createStone(topPos, leftPos);
                    gridContainer.appendChild(stone);

                    // EXTRA: Se quiser a linha "pontilhada" igual a imagem de referência,
                    // adicionamos pedras no MEIO das linhas também.
                    if (c < columns) {
                        // Pedra no meio da linha horizontal superior
                         const stoneMidH = createStone(topPos, leftPos + (cellSize / 2));
                         gridContainer.appendChild(stoneMidH);
                    }
                    if (r < rows) {
                         // Pedra no meio da linha vertical esquerda
                         const stoneMidV = createStone(topPos + (cellSize / 2), leftPos);
                         gridContainer.appendChild(stoneMidV);
                    }
                }
            }
        }

        // --- FUNÇÕES DE EVENTOS ---
        function addEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;

            if (!title || !date || !time) {
                alert("Preencha todos os campos!");
                return;
            }

            events.push({
                id: Date.now(),
                title,
                date,
                time
            });

            renderCalendar(); // Redesenha a tela
        }

        function resetCalendar() {
            if(confirm("Deseja apagar todos os eventos?")) {
                events = [];
                renderCalendar();
            }
        }

        // Inicialização
        // Colocando data fixa em Janeiro/2026 para demonstração, mas pode usar Date() atual
        currentDate = new Date(2026, 0, 1); 
        renderCalendar();

    </script>
</body>
</html>
